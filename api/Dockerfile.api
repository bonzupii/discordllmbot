FROM node:20-alpine

# Install curl for healthcheck
RUN apk add --no-cache curl

WORKDIR /usr/src/app

# Copy all package.json files for workspaces
COPY package*.json ./
COPY bot/package*.json ./bot/
COPY api/package*.json ./api/
COPY dashboard/package*.json ./dashboard/
COPY shared/package*.json ./shared/
COPY docs/package*.json ./docs/

# Install dependencies for all workspaces
RUN npm install

# Expose port
EXPOSE 3000

WORKDIR /usr/src/app/api
CMD ["npm", "start"]
